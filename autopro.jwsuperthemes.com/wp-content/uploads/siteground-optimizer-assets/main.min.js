(function ($) {
    "use strict";

    var jws = {
        jws_theme_lightbox: function () {
            $(".tb-close-lightbox").on("click", function (e) {
                e.preventDefault();
                var target = $($(this).attr("href"));
                if (target.length) target.fadeOut();
            });

            $(".tb-open-lightbox").on("click", function (e) {
                e.preventDefault();
                var target = $($(this).attr("href"));
                if (!target.length) return;

                target.fadeIn();

                if (
                    target.hasClass("tb-send-mail-wrap") &&
                    typeof $.cookie === "function" &&
                    $.cookie("ckie_popup") === "true"
                ) {
                    target.find("#tb-hide-popup").prop("checked", true);
                }
            });

            $("#tb-send_mail")
                .on("click", function (e) {
                    e.stopPropagation();
                    $(this).fadeOut();
                })
                .on("click", ".tb-mail-inner", function (e) {
                    e.stopPropagation();
                });
        },

        jws_theme_back_to_top: function () {
            var $btn = $(".car-top");
            var winHeight = $(window).height();

            $(document).on("scroll", function () {
                var scrollTop = $(window).scrollTop();
                if (scrollTop < winHeight) {
                    $btn.removeClass(["show", "car-down"]).addClass("no-active");
                } else {
                    $btn.removeClass("no-active").addClass(["show", "car-down"]);
                }
            });

            $btn.on("click", function () {
                if (typeof $.smoothScroll === "function") {
                    $.smoothScroll();
                } else {
                    $("html, body").animate({ scrollTop: 0 }, 1500);
                }
            });
        },

        jws_theme_post: function (action, data) {
            return $.post(the_ajax_script.ajaxurl, {
                action: "jws_theme_" + action,
                data: data
            });
        },

        jws_theme_run_ready: function () {
            this.jws_theme_lightbox();
            this.jws_theme_back_to_top();
        }
    };

    $(document).ready(function () {
        jws.jws_theme_run_ready();

        $('[data-toggle="tooltip"]').tooltip();

        $(".tb-header-menu").sticky({
            topSpacing: 0
        });
    });

})(window.jQuery);
